如图一所示，有线通讯装置分为两个装置，两个装置间可以通过方波
实现 2 位 10 进制数据 x 的信息交互。通讯依靠两路方波信号传递信息，两路方波频率均为 f，两路方波相位差为 p，通讯装置利用频率
f以及相位差 p的数值实现信息的传递。  
图一 有线通讯检测装置示意图  
如图二所示，通信过程中两个装置之间传递的数据 x与频率 f 的数值
以及相位差 p 的数值有关。关系式：X=（f%10）*10+p%36。  
图二 数据 x 与频率 f、相位差 p 的关系

## 基础部分
1.装置 1 部署在自带的 51 单片机上，数码管显示当前发送的数据 x。  
2.装置 1 有两个按键分别可以修改 x 的十位大小和个位大小，按键修改数值的方式自行定义。x数值更改后，数码管显示的数值自动更新。  
3.装置 1 可以产生两路方波，方波的频率与相位差满足如下等式：
X=（f%10）*10+p%36。  
注意：装置 1 产生的方波信号在示波器上经行检测，误差低于 5%此
项满分，测试点如图一所示。  
4.使用提供的元器件自行焊接装置 2，装置 2需拥有 2 个按键以及一个4位数码管。（装置 2 使用的 MCU 仅能为提供的 51 芯片，装置2不得使用其他 MCU。）装置 2焊接时推荐参考附录中的原理图。  
5.装置 2 可以接收两路方波信号，并测量出信号的频率 f以及相位差
p，带入公式 X=（f%10）*10+p%36 得到装置 1 传来的数据 x，并
将 x显示在数码管上。

## 提高部分

1.装置 1 中的发送的数据 x 通过串口被上位机修改，装置 2 每过 1
秒将接收的数据 x通过串口发送到上位机显示。串口通信格式如下：  
修改时发送 set x=66 可将装置 1 的发送数据 x 修改为 66。  
接收时发送 get x=66 表示装置 2 接收到的数据 x 为 66。  
2.通过再增加两路方波的方式实现数据的双向传递。两个装置间的单
向信息传递升级为两个装置间的双向信息传递。装置 2 也有一个 2位
十进制数通过方波来向装置 1 发送并被装置 1接收。  
3.两个装置均可以通过串口向上位机发送他们接收到的数据 x，也均
可以通过串口被上位机修改当前要发送的数据 x，具体要求与提高 1
中相同。  
4.装置 1 可以实现对当前发送的数据 x进行掉电保护。  
5.装置具有大数据传递模式。上位机向任意一个装置发送字符“大数
据模式”可使两个装置都进入大数据传递模式，此时两个装置数码管
持续显示数字 6666。上位机向任意一个装置发送字符“标准模式”
可使两个装置都返回原先的模式。  
6.装置进入大数据传递模式后，提高 2中的双向通讯由 2位十进制数
x升级到 10 位十进制数 y。此模式下，上位机可通过串口修改当前 y
的数值，装置接收到 y的数值后每过 1秒通过串口向上位机发送 y的
数值。串口通讯格式如下：  
修改y时发送 set y =0123456789 将发送的数值y修改0123456789。  
接收 y 后发送 get y =0123456789 将接收到的数据 y发送给上位机。  
## 备注  
1.题目用到两块单片机构成两个装置，装置 1 为自带的 51 板卡，装
置 2为焊接的 51板卡。
